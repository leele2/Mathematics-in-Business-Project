S0 = 30.0526;
u  = 1.1;
d  = 1/u;
N  = 5;
node = zeros(N+1,N+1);
avgs = cell(N+1,N+1);
perm = [];
for i = 0:N
    for j = 0:i
        node(i+1,j+1) = S0*u^j*d^(i-j);
        perm = uniqueperms([ones(1,j), zeros(1,i-j)]);
        avgs{i+1,j+1} = zeros(2^i,1);
        for k = 0:2^i
            for l = 1:numel(perm(k,:))
                avgs(i+1,j+1)(k) = avgs(i+1,j+1)(k) + S0*u^perm(k,l) 

        end
end